<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Rider Tracker Pro</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#121212">

<style>
body { background:#121212; color:#eee; font-family:sans-serif; margin:0; padding:env(safe-area-inset-top) 10px 10px }
.card { background:#1e1e1e; padding:15px; border-radius:12px; border:1px solid #333; margin-bottom:15px }
h3 { color:#00CCBC; margin:0 0 10px; text-align:center; font-size:14px; text-transform:uppercase }
input,select { width:100%; padding:12px; background:#2a2a2a; border:1px solid #444; color:white; border-radius:8px; margin-bottom:10px; font-size:16px }
.grid { display:grid; grid-template-columns:1fr 1fr; gap:10px }
.grid-triple { display:grid; grid-template-columns:1fr 1fr 1fr; gap:5px; text-align:center; border-top:1px solid #333; padding-top:12px; margin-top:15px }
button { width:100%; padding:15px; border:none; border-radius:8px; font-weight:bold; cursor:pointer }
.btn-add { background:#00CCBC; color:#000 }
.btn-fuel { background:#ffa500; color:#000 }
.session-item { background:#252525; padding:12px; border-radius:8px; margin-bottom:8px; border-left:4px solid #00CCBC; font-size:13px }
</style>
</head>

<body>

<div class="card">
<h3>ðŸš— Rider Tracker Pro</h3>
<div class="grid">
<div>Netto Reale<br><b id="netto">0.00 â‚¬</b></div>
<div>Ore Totali<br><b id="ore">0.0</b></div>
</div>
</div>

<div class="card">
<h3>âž• Sessione</h3>
<input id="lordo" type="number" placeholder="Lordo â‚¬">
<input id="oreInp" type="number" step="0.1" placeholder="Ore">
<button class="btn-add" onclick="add()">Salva</button>
</div>

<div id="storico"></div>

<script>
let db = JSON.parse(localStorage.getItem("rider_db")) || [];

function add(){
  let l = +lordo.value || 0;
  let o = +oreInp.value || 0;
  db.push({l,o});
  localStorage.setItem("rider_db", JSON.stringify(db));
  lordo.value = oreInp.value = "";
  calc();
}

function calc(){
  let totL = db.reduce((a,b)=>a+b.l,0);
  let totO = db.reduce((a,b)=>a+b.o,0);
  netto.innerText = (totL*0.8).toFixed(2)+" â‚¬";
  ore.innerText = totO.toFixed(1);
  storico.innerHTML = db.map(x=>`<div class="session-item">Lordo ${x.l}â‚¬ - Ore ${x.o}</div>`).join("");
}

calc();

if("serviceWorker" in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
