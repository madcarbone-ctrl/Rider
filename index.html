<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rider Tracker Pro V1.0</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --primary-accent: #00ffd5;
            --secondary-accent: #ff4747;
            --text-main: #ffffff;
            --text-dim: #b3b3b3;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0; padding: 20px;
            display: flex; flex-direction: column; align-items: center;
        }

        .clock-container {
            width: 100%; max-width: 500px;
            background: var(--card-bg);
            border-radius: 12px; padding: 10px; margin-bottom: 20px;
            border: 1px solid var(--primary-accent); text-align: center;
        }

        #currentDate { color: var(--primary-accent); font-size: 0.75rem; font-weight: bold; text-transform: uppercase; }
        #currentTime { font-size: 1.8rem; font-weight: bold; letter-spacing: 2px; margin-top: 5px; }

        .dashboard {
            display: grid; grid-template-columns: repeat(3, 1fr);
            gap: 10px; width: 100%; max-width: 500px; margin-bottom: 20px;
        }

        .card {
            background: var(--card-bg); padding: 15px 5px;
            border-radius: 12px; text-align: center; border: 1px solid #333;
        }

        .card-label { font-size: 0.65rem; color: var(--text-dim); text-transform: uppercase; font-weight: bold; display: block; }
        .card-value { font-size: 1.1rem; font-weight: bold; color: var(--primary-accent); margin-top: 5px; }
        
        input {
            background: transparent; border: none; border-bottom: 2px solid #444;
            color: white; width: 80%; text-align: center; font-size: 1.1rem; outline: none;
        }

        .goal-container {
            width: 100%; max-width: 500px; background: var(--card-bg);
            padding: 15px; border-radius: 15px; margin-bottom: 20px; border: 1px solid #333;
        }

        .progress-bg { background: #333; height: 20px; border-radius: 10px; overflow: hidden; margin-top: 10px; }
        .progress-fill { background: linear-gradient(90deg, #00ffd5, #008f7a); height: 100%; width: 0%; transition: width 0.5s; }

        .actions-grid {
            display: grid; grid-template-columns: repeat(3, 1fr);
            gap: 10px; width: 100%; max-width: 500px;
            background: #1a1a1a; padding: 15px; border-radius: 20px; border: 1px solid #333;
        }

        .btn-action {
            background: var(--card-bg); border: 1px solid #444; border-radius: 15px;
            padding: 15px 5px; color: white; font-weight: bold; font-size: 0.7rem;
        }

        .btn-main { grid-column: span 3; padding: 15px; border-radius: 12px; border: none; font-weight: bold; text-transform: uppercase; }
        .btn-report { background: var(--primary-accent); color: #000; }
        .btn-reset { background: #8b0000; color: white; margin-top: 15px; }
    </style>
</head>
<body>
    <h1>RIDER TRACKER PRO V1.0</h1>
    <div class="clock-container">
        <span id="currentDate">-- -- --</span>
        <div id="currentTime">00:00:00</div>
    </div>
    <div class="dashboard">
        <div class="card"><span class="card-label">Lordo</span><div class="card-value" id="lordo">€0.00</div></div>
        <div class="card"><span class="card-label">Netto</span><div class="card-value" style="color:var(--secondary-accent)" id="netto">€0.00</div></div>
        <div class="card"><span class="card-label">Ore</span><div class="card-value" id="ore">0.0</div></div>
        <div class="card"><span class="card-label">Litri Stim.</span><div class="card-value" id="litri">0.0L</div></div>
        <div class="card"><span class="card-label">Km/L</span><div class="card-value" id="kml">0.0</div></div>
        <div class="card"><span class="card-label">Spesa Benz.</span><div class="card-value" id="spesaBenz">€0.00</div></div>
        <div class="card"><span class="card-label">Target €</span><input type="number" id="targetInput" oninput="updateUI()"></div>
        <div class="card"><span class="card-label">Tax %</span><input type="number" id="taxInput" value="20" oninput="updateUI()"></div>
        <div class="card"><span class="card-label">Mancante</span><div class="card-value" id="mancante">€0.00</div></div>
    </div>
    <div class="goal-container">
        <div style="display:flex; justify-content:space-between; font-size:0.8rem; color:var(--primary-accent)">
            <span>OBIETTIVO</span><span id="percText">0%</span>
        </div>
        <div class="progress-bg"><div class="progress-fill" id="progressBar"></div></div>
    </div>
    <div class="actions-grid">
        <button class="btn-action">TURNO</button>
        <button class="btn-action">BENZINA</button>
        <button class="btn-action">STORICO</button>
        <button class="btn-main btn-report" onclick="generatePDF()">Genera Report PDF</button>
        <button class="btn-main btn-reset" onclick="resetAll()">Azzera Database</button>
    </div>
    <script>
    function updateClock() {
        const now = new Date();
        const days = ['Domenica', 'Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato'];
        const months = ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno', 'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'];
        document.getElementById('currentDate').innerText = `${days[now.getDay()]} ${now.getDate()} ${months[now.getMonth()]}`;
        document.getElementById('currentTime').innerText = now.toLocaleTimeString('it-IT', { hour12: false });
    }
    setInterval(updateClock, 1000);
    updateClock();

    function updateUI() {
        const target = parseFloat(document.getElementById('targetInput').value) || 0;
        const lordo = 0; 
        const mancante = Math.max(0, target - lordo);
        document.getElementById('mancante').innerText = `€${mancante.toFixed(2)}`;
        const perc = target > 0 ? Math.min(100, (lordo / target) * 100) : 0;
        document.getElementById('progressBar').style.width = perc + '%';
        document.getElementById('percText').innerText = Math.round(perc) + '%';
    }

    function resetAll() {
        if(confirm("Vuoi azzerare tutto?")) {
            document.getElementById('targetInput').value = '';
            updateUI();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }

    async function generatePDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.text("Rider Tracker Report", 10, 10);
        doc.save("Report.pdf");
    }
</script>
</body>
</html>
